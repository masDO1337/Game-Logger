<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title><%= title || 'Discord Bot' %></title>
    <link rel="stylesheet" href="/Style/global.css" />
    <style>
        .guilds{ list-style:none; padding:0; margin:8px 0 0 0; display:flex; flex-direction:column; gap:8px; }
        .guilds a{ background:#0b1220; color: var(--muted); text-decoration:none; display:flex; align-items:center; gap:16px; padding:12px 16px; border-radius:8px; transition:all 0.2s; }
        .guilds a:hover{ background:var(--accent); color:white; transform:translateY(-1px); }
        .guilds .logo{ width:40px; height:40px; border-radius:8px; font-size:14px; }
        .guilds .logo img{ display: block; width: 100%; height: 100%; border-radius:8px; object-fit:cover; }
        .guilds h3{ margin:0; font-size:16px; }
        .guilds .member-count{ margin-left:auto; font-size:14px; }
        @media (max-width:800px) {.guilds a {flex-direction: column;} .guilds .member-count {margin-left: 0;}}
    </style>
</head>
<body>
    <div class="card" role="main">
        <%- include('Layouts/header', { back: true, home: true, log: true, session }) -%>

        <div class="grid">
            <section class="panel">
                <h2 style="margin: 0 0 8px 0">Guilds</h2>
                <div class="muted" style="margin-bottom:16px">Select a guild to view detailed analytics.</div>
                <div class="guilds">
                    <% if (guilds && guilds.length > 0) { %>
                        <% guilds.forEach(function(server) { %>
                            <a href="<%= '/guild/' + server.id %>">
                                <div class="logo"><img src="<%= server.icon %>" alt="icon"></div>
                                <h3><%= server.name %></h3>
                                <div class="muted">ID: <%= server.id %></div>
                                <div class="member-count muted">(Members: <%= server.memberCount %>)</div>
                            </a>
                        <% }); %>
                    <% } else { %>
                        <li>No servers found.</li>
                    <% } %>
                    </div>
            </section>
        </div>
        
        <footer>
            <div><%= owner || 'Bot Owner' %> â€¢ <span id="year"><%= new Date().getFullYear() %></span></div>
        </footer>
    </div>
</body>
</html>